{% extends 'app/admin_dashboard_base.html' %}
{% load static %}

{% block content %}
{% if messages %}
      {% for message in messages %}
          <div class="alert alert-info alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
      {% endfor %}
  {% endif %}
<div style="padding: 30px;">
    <h1 style="font-size: 28px; font-weight: bold; margin-bottom: 20px; text-align: center; color: black;">
        ðŸ“‹ Candidate List
    </h1>

    <!-- Box container -->
    <div class="table-responsive" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">

        <table class="table table-hover align-middle text-center">
            <thead class="table-dark">
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Contact</th>
                    <th>Experience</th>
                    <th>Location</th>
                    <th>Salary</th>
                    <th>Posted On</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for candidate in all_user %}
                <tr>
                    <td>{{ candidate.firstname }}</td>
                    <td>{{ candidate.user_id.email }}</td>
                    <td>{{ candidate.contact }}</td>
                    <td>{{ candidate.city }}</td>
                    <td>{{ candidate.state }}</td>
                    <td>{{ candidate.salary_expectation }}</td>
                    <td>{{ candidate.user_id.created_at|date:"M d, Y" }}</td>
                    <td>
                        <a href="{% url 'delete_user' candidate.user_id.id %}" 
                           class="btn btn-danger btn-sm delete-btn"
                           onclick="return confirm('Are you sure you want to delete this user? This will also delete all related data.')">
                            <i class="fas fa-trash-alt"></i> Delete
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" class="text-muted">No candidates found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>

<style>
    .table th, .table td {
        vertical-align: middle;
        padding: 12px;
    }
    .table-hover tbody tr:hover {
        background-color: #f8f9fa;
    }
    
    /* Custom delete button styling */
    .delete-btn {
        border-radius: 8px; /* Rounded corners */
        padding: 4px 10px; /* Small size */
        font-size: 0.8rem;
        transition: all 0.2s ease-in-out; /* Smooth hover animation */
    }

    .delete-btn:hover {
        background-color: #c82333 !important; /* Darker red */
        transform: scale(1.05); /* Slight zoom on hover */
        box-shadow: 0 0 5px rgba(255, 0, 0, 0.6) !important; /* Red glow effect */
    }
</style>
{% endblock %}
